let currentLang=window.localStorage.getItem("lang")??"en",capsLockStatus=!1,shiftStatus=!1;const GitURL="https://github.com/bmspd",invisibleSymbols=["Control","CapsLock","Alt","Shift","Delete","Backspace","Tab","Meta","ArrowUp","ArrowLeft","ArrowDown","ArrowRight"],enAlphabet="qwertyuiopasdfghjklzxcvbnm",ruAlphabet="йцукенгшщзхъфывапролджэёячсмитьбю",keys1=[["§","±",">","<"],["1","!"],["2","@",'"'],["3","#","№"],["4","$","%"],["5","%",":"],["6","^",","],["7","&","."],["8","*",";"],["9","("],["0",")"],["-","_"],["=","+"],["Backspace","Backspace"],["Git","Git"]],codeKeys1=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace","Git"],keys2=[["Tab","Tab"],["q","Q","й","Й"],["w","W","ц","Ц"],["e","E","у","У"],["r","R","к","К"],["t","T","е","Е"],["y","Y","н","Н"],["u","U","г","Г"],["i","I","ш","Ш"],["o","O","щ","Щ"],["p","P","з","З"],["[","{","х","Х"],["]","}","ъ","Ъ"],["Delete","Delete"],["Lan","Lan"]],codeKeys2=["Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Delete","Lan"],keys3=[["CapsLock","CapsLock"],["a","A","ф","Ф"],["s","S","ы","Ы"],["d","D","в","В"],["f","F","а","А"],["g","G","п","П"],["h","H","р","Р"],["j","J","о","О"],["k","K","л","Л"],["l","L","д","Д"],[";",":","ж","Ж"],["'",'"',"э","Э"],["\\","|","ё","Ё"],["Enter","Enter"]],codeKeys3=["CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Backslash","Enter"],keys4=[["Shift","Shift"],["`","~","]","["],["z","Z","я","Я"],["x","X","ч","Ч"],["c","C","с","С"],["v","V","м","М"],["b","B","и","И"],["n","N","т","Т"],["m","M","ь","Ь"],[",","<","б","Б"],[".",">","ю","Ю"],["/","?","/","?"],["Shift","Shift"],["⤒","⤒"],["♺","♺"]],codeKeys4=["ShiftLeft","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ShiftRight","ArrowUp"],keys5=[["Ctrl","Ctrl"],["⌥","⌥"],["⌘","⌘"],["Spacebar","Spacebar"],["⌘","⌘"],["⌥","⌥"],["Ctrl","Ctrl"],["➜","➜"],["⤓","⤓"],["➜","➜"]],codeKeys5=["ControlLeft","AltLeft","MetaLeft","Space","MetaRight","AltRight","ControlRight","ArrowLeft","ArrowDown","ArrowRight"],keysAll=[keys1,keys2,keys3,keys4,keys5],codeKeysAll=[codeKeys1,codeKeys2,codeKeys3,codeKeys4,codeKeys5];function createNewElement(e,t,a,r){const s=document.createElement(e);return t&&s.classList.add(...t),a&&a.append(s),r&&(s.innerText=r),s}function appendKeys(e,t,a){const[r,s]=a,[n,i,l,o]=e,c=createNewElement("div",["__key",...e.map((e=>`_${" "===e?"Spacebar":e}_`)),`code_${codeKeysAll[r][s]}`],t),u=createNewElement("h2",null,c);createNewElement("span",["_lower"],u,n),i&&createNewElement("span",["_upper","invisible"],u,i),l&&createNewElement("span",["_ruF","invisible"],u,l),o&&createNewElement("span",["_ruS","invisible"],u,o)}function chooseButton(e,t){if(1===e.length)return e;return[e.find((e=>Array.from(e.classList).includes(`code_${t.code}`)))]}function findPressedButton(e,t){let a;return a="ShiftLeft"===e.code?[t.filter((e=>e.classList.value.includes("_Shift_")))[0]]:"ShiftRight"===e.code?[t.filter((e=>e.classList.value.includes("_Shift_")))[1]]:"AltLeft"===e.code?[t.filter((e=>e.classList.value.includes("_⌥_")))[0]]:"AltRight"===e.code?[t.filter((e=>e.classList.value.includes("_⌥_")))[1]]:"ControlLeft"===e.code?[t.filter((e=>e.classList.value.includes("_Ctrl_")))[0]]:"ControlRight"===e.code?[t.filter((e=>e.classList.value.includes("_Ctrl_")))[1]]:"MetaLeft"===e.code?[t.filter((e=>e.classList.value.includes("⌘")))[0]]:"MetaRight"===e.code?[t.filter((e=>e.classList.value.includes("⌘")))[1]]:"ArrowUp"===e.code?[t.find((e=>e.classList.value.includes("_⤒_")))]:"ArrowLeft"===e.code?[t.filter((e=>e.classList.value.includes("_➜_")))[0]]:"ArrowDown"===e.code?[t.find((e=>e.classList.value.includes("_⤓_")))]:"ArrowRight"===e.code?[t.filter((e=>e.classList.value.includes("_➜_")))[1]]:t.filter((t=>t.classList.value.includes(`_${" "===e.key?"Spacebar":e.key}_`))),a.length?(a=chooseButton(a,e),a):null}function keyboardLangChanger(e){const t=Array.from(e.querySelectorAll(".__key")),a=t.find((e=>e.classList.contains("_Lan_")));t.forEach((e=>{const t=e.querySelector("._lower"),r=e.querySelector("._upper"),s=e.querySelector("._ruF"),n=e.querySelector("._ruS");"ru"===currentLang&&(a.style.backgroundImage='url("./img/russia.png")'),"en"===currentLang?(a.style.backgroundImage='url("./img/united-kingdom.png")',s&&n?(s.classList.add("invisible"),n.classList.add("invisible"),shiftStatus&&capsLockStatus?t.classList.remove("invisible"):shiftStatus||capsLockStatus?r.classList.remove("invisible"):t.classList.remove("invisible")):s&&shiftStatus&&(s.classList.add("invisible"),r.classList.remove("invisible"))):s&&n?(t.classList.add("invisible"),r.classList.add("invisible"),shiftStatus&&capsLockStatus?s.classList.remove("invisible"):shiftStatus||capsLockStatus?n.classList.remove("invisible"):s.classList.remove("invisible")):s&&shiftStatus&&(s.classList.remove("invisible"),r.classList.add("invisible"))}))}function capsLockChanger(e){if(capsLockStatus=!capsLockStatus,"en"===currentLang){[...Array.from(e.querySelectorAll("._lower")).filter((e=>enAlphabet.includes(e.innerText))),...Array.from(e.querySelectorAll("._upper")).filter((e=>enAlphabet.includes(e.innerText.toLowerCase())))].forEach((e=>e.classList.toggle("invisible")))}else{[...Array.from(e.querySelectorAll("._ruF")).filter((e=>ruAlphabet.includes(e.innerText))),...Array.from(e.querySelectorAll("._ruS")).filter((e=>ruAlphabet.includes(e.innerText.toLowerCase())))].forEach((e=>e.classList.toggle("invisible")))}}function languageChanger(e,t){const[a]=t;if("Tab"===e)return"\t";if("Enter"===e)return"\n";if(" "===e)return" ";if(invisibleSymbols.includes(e))return"";return Array.from(a.querySelectorAll("span")).find((e=>!e.classList.value.includes("invisible"))).innerText}function shiftButtonHandler(e,t,a){if(2===shiftStatus&&"down"===a)return;if(1===shiftStatus&&"up"===a)return;Array.from(t.querySelectorAll(".__key")).forEach((e=>{const t=e.querySelector("._lower"),a=e.querySelector("._upper"),r=e.querySelector("._ruF"),s=e.querySelector("._ruS");"en"===currentLang?t&&a&&(t.classList.toggle("invisible"),a.classList.toggle("invisible")):r&&s?(r.classList.toggle("invisible"),s.classList.toggle("invisible")):t&&r?(t.classList.toggle("invisible"),r.classList.toggle("invisible")):(t.classList.toggle("invisible"),a.classList.toggle("invisible"))}))}const body=document.querySelector("body"),h1=document.createElement("h1");h1.innerText="VIRTUAL KEYBOARD",body.append(h1);const textarea=document.createElement("textarea");textarea.addEventListener("keydown",(e=>{["ArrowLeft","ArrowRight","ArrowDown","ArrowUp"].includes(e.code)||e.preventDefault()})),body.append(textarea),textarea.focus();const keyboard=document.createElement("div");keyboard.classList.add("__keyboard"),body.append(keyboard);const languageBar=document.createElement("h1");languageBar.classList.add("__lang-bar"),languageBar.innerText=`Current language is ${currentLang}`,body.append(languageBar),createNewElement("h2",null,body,"Keyboard was made in MacOS system"),createNewElement("h2",null,body,"To switch language press CONTROL + OPTION(⌥) or CTRL + ALT on WIN"),createNewElement("h2",null,body,"Also to change current language click on flag button"),createNewElement("h2",null,body,"Click on ♺ if you want to clear textarea field"),createNewElement("h2",null,body,"Optimal screen width should start from 1240 px :)"),keysAll.forEach(((e,t)=>{const a=createNewElement("div",["__row"]);e.forEach(((e,r)=>appendKeys(e,a,[t,r]))),keyboard.append(a)}));const keyCaps=Array.from(keyboard.querySelectorAll(".__key"));document.addEventListener("keydown",(e=>{e.ctrlKey&&e.altKey&&(currentLang="en"===currentLang?"ru":"en",window.localStorage.setItem("lang",currentLang),languageBar.innerText=`Current language is ${currentLang}`,keyboardLangChanger(keyboard));const t=findPressedButton(e,keyCaps);if(null===t)return;if(t.forEach((e=>e.classList.add("active"))),"Backspace"===e.key&&textarea.selectionStart){const e=textarea.selectionStart-1,t=textarea.value.split("");return t.splice(textarea.selectionStart-1,1),textarea.value=t.join(""),void textarea.setSelectionRange(e,e)}if("Delete"===e.key){const e=textarea.selectionStart,t=textarea.value.split("");return t.splice(textarea.selectionStart,1),textarea.value=t.join(""),void textarea.setSelectionRange(e,e)}if("Space"===e.code)return void(textarea.value+=" ");if("Tab"===e.key&&e.preventDefault(),"CapsLock"===e.key&&capsLockChanger(keyboard),"Shift"===e.key&&(shiftStatus+=1,shiftButtonHandler(e,keyboard,"down")),"Delete"===e.key||"Shift"===e.key||"ArrowLeft"===e.code||"ArrowRight"===e.code||"ArrowUp"===e.code||"ArrowDown"===e.code)return;const a=languageChanger(e.key,t);if("♺"===a)textarea.value="";else if("Lan"===a)currentLang="en"===currentLang?"ru":"en",window.localStorage.setItem("lang",currentLang),languageBar.innerText=`Current language is ${currentLang}`,keyboardLangChanger(keyboard);else if("Git"===a)window.open(GitURL,"blank");else{const e=textarea.selectionStart+1;textarea.value=textarea.value.slice(0,e-1)+a+textarea.value.slice(e-1),textarea.setSelectionRange(e,e)}})),document.addEventListener("keyup",(e=>{"CapsLock"===e.key&&capsLockChanger(keyboard),"Shift"===e.key&&(shiftStatus-=1,shiftButtonHandler(e,keyboard,"up"));const t=findPressedButton(e,keyCaps);null!==t&&t.forEach((e=>e.classList.remove("active")))})),keyboardLangChanger(keyboard);const keyDivs=document.querySelectorAll(".__key");keyDivs.forEach((e=>{const t=Array.from(e.classList).find((e=>e.includes("code"))).slice(5);let a;a="ShiftLeft"===t||"ShiftRight"===t?"Shift":"CapsLock"===t?"CapsLock":"Tab"===t?"Tab":"Backspace"===t?"Backspace":"ControlLeft"===t||"ControlRight"===t?"Control":"AltLeft"===t||"AltRight"===t?"Alt":"MetaLeft"===t||"MetaRight"===t?"Meta":"Delete"===t?"Delete":"Enter"===t?"Enter":"ArrowRight"===t?"ArrowRight":"ArrowLeft"===t?"ArrowLeft":"ArrowDown"===t?"ArrowDown":"ArrowUp"===t?"ArrowUp":void 0;const r=new KeyboardEvent("keydown",{code:t,key:a}),s=new KeyboardEvent("keyup",{code:t,key:a});e.addEventListener("mousedown",(a=>{a.preventDefault();Array.from(keyDivs).find((e=>e.classList.contains(`code_${t}`))).classList.add("fake-active"),"CapsLock"===t&&e.classList.contains("active")?document.dispatchEvent(s):("ArrowLeft"===r.code&&textarea.selectionStart&&textarea.setSelectionRange(textarea.selectionStart-1,textarea.selectionStart-1),"ArrowRight"===r.code&&textarea.setSelectionRange(textarea.selectionStart+1,textarea.selectionStart+1),"ArrowUp"===r.code&&textarea.setSelectionRange(textarea.value.length,textarea.value.length),"ArrowDown"===r.code&&textarea.setSelectionRange(0,0),document.dispatchEvent(r))})),e.addEventListener("mouseup",(()=>{"CapsLock"!==t&&document.dispatchEvent(s)}))})),document.addEventListener("mouseup",(()=>{const e=Array.from(keyDivs).find((e=>e.classList.contains("fake-active")));e&&(e.classList.contains("code_CapsLock")||(e.classList.remove("fake-active"),e.classList.remove("active")))}));
//# sourceMappingURL=../sourcemaps/main.min.js.map
